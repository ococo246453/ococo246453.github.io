<!doctype html><html lang=zh-tw><head><title>.NET Core 三層式架構 // Siaoyu's Blog</title>
<link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.133.1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="John Doe"><meta name=description content=".NET Core 三層式架構"><link rel=stylesheet href=/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css><meta name=twitter:card content="summary"><meta name=twitter:title content=".NET Core 三層式架構"><meta name=twitter:description content=".NET Core 三層式架構"><meta property="og:url" content="https://ococo246453.github.io/posts/net-core-%E4%B8%89%E5%B1%A4%E5%BC%8F%E6%9E%B6%E6%A7%8B/"><meta property="og:site_name" content="Siaoyu's Blog"><meta property="og:title" content=".NET Core 三層式架構"><meta property="og:description" content=".NET Core 三層式架構"><meta property="og:locale" content="zh_tw"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-25T17:35:45+00:00"><meta property="article:modified_time" content="2022-10-25T17:35:45+00:00"><meta property="article:tag" content="後端"></head><body><header class=app-header><a href=https://ococo246453.github.io/><img class=app-header-avatar src=/avatar.jpg alt="John Doe"></a>
<span class=app-header-title>Siaoyu's Blog</span><p>由後端轉職為App工程師的開發者。 聯絡我：ococo246453@gmail.com</p><div class=app-header-social><a href=https://github.com/ococo246453 target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://www.facebook.com/ococo246453 target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-facebook"><title>Facebook</title><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
</a><a href=mailto:ococo246453@gmail.com target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>.NET Core 三層式架構</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Oct 25, 2022</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
1 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://ococo246453.github.io/tags/%E5%BE%8C%E7%AB%AF/>後端</a></div></div></header><div class=post-content><h1 id=三層式架構>三層式架構</h1><h2 id=分層參考>分層參考</h2><p><img src=https://i.imgur.com/MY6HIhF.png alt></p><h3 id=加入參考>加入參考</h3><blockquote><p>Controller(Application層) 參考 Service & Common
Services 參考 Repository & Common
Repository 參考 Common</p></blockquote><ul><li>測試專案放在商業邏輯層(Service)</li><li>商業邏輯層(Service)負責處理商業邏輯</li><li>資料存取放在Repository</li><li>Application層(Controller)處理資料進出</li></ul><h3 id=註冊生命週期>註冊生命週期</h3><pre><code>透過Application層的StartUp
</code></pre><h2 id=各層model命名規則>各層Model命名規則</h2><p><img src=https://i.imgur.com/xIov6M6.png alt></p><blockquote><p>上圖左進右出</p><p>各層都要<span class=important>嚴格控管資料進出的Model</span>,命名規則如上圖</p><ul><li>可以透過工具來做轉換 <span class=important>(AutoMapper)</span></li></ul></blockquote><h2 id=實際專案>實際專案</h2><p><img src=https://i.imgur.com/MbTLLJx.png alt></p><blockquote><p>Service & Repository & Common 都是<span class=important>類別庫</span>
圖片引用自 <a href=https://sunnyday0932.github.io/2020/%E4%B8%89%E5%B1%A4%E5%BC%8F%E6%9E%B6%E6%A7%8B/>三層式架構</a></p></blockquote><h2 id=tdd開發>TDD開發</h2><h3 id=單元測試>單元測試</h3><p>使用套件: NUnit、NSubstitute、FluentAssertions</p><table><thead><tr><th style=text-align:center>Arrange</th><th style=text-align:center>Actual</th><th style=text-align:center>Assert</th></tr></thead><tbody><tr><td style=text-align:center>欲傳入參數</td><td style=text-align:center>實際參數</td><td style=text-align:center>比對兩值</td></tr></tbody></table><p><img src=https://i.imgur.com/JQZxidl.png alt></p><blockquote><p>圖片引用自 <a href=https://sunnyday0932.github.io/2021/%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6-2/>Sian的筆記</a></p></blockquote><p><strong>參考 <a href=https://igouist.github.io/post/2021/10/newbie-5-3-layer-architecture/>使用三層式架構來切分服務的關注點和職責吧</a></strong></p><h2 id=ihostedservice>IHostedService</h2><style>.important{background:#ff0;font-weight:700}</style></div><div class=post-footer></div></article></main></body></html>